{"ast":null,"code":"var _jsxFileName = \"/home/core/Documents/baked-beans-master/src/providers/AuthProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, forwardRef, useContext, useEffect, useState } from \"react\";\nimport Web3 from \"web3\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  address: null,\n  connect: () => null,\n  loading: false,\n  disconnect: () => null,\n  chainId: null,\n  setSnackbar: () => null\n});\nconst providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider,\n    // required\n    options: {\n      rpc: {\n        56: \"https://bsc-dataseed.binance.org/\",\n        97: \"https://data-seed-prebsc-1-s1.binance.org:8545/\",\n        250: \"https://rpc.ftm.tools/\"\n      },\n      network: \"binance\" //{\"binance\", \"fantom\"}\n\n    }\n  }\n};\nconst Alert = /*#__PURE__*/forwardRef(_c = (props, ref) => {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    ref: ref,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 10\n  }, this);\n});\n_c2 = Alert;\nconst web3Modal = new Web3Modal({\n  cacheProvider: true,\n  // optional\n  providerOptions // required\n\n});\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [address, setAddress] = useState();\n  const [loading, setLoading] = useState(false);\n  const [snackbar, setSnackbar] = useState(null);\n  const [chainId, setChainId] = useState(null);\n\n  const subscribeProvider = provider => {\n    provider.on(\"disconnect\", error => {\n      console.log(error);\n      setChainId(null);\n      setAddress(null);\n    });\n    provider.on(\"accountsChanged\", accounts => {\n      setAddress(accounts[0]);\n      setSnackbar({\n        type: \"info\",\n        message: \"Account Changed\"\n      });\n    }); // Subscribe to chainId change\n\n    provider.on(\"chainChanged\", chainId => {\n      setChainId(chainId);\n    });\n  };\n\n  const connect = async () => {\n    if (address) {\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      let web3 = new Web3(Web3.givenProvider);\n\n      if (!web3.currentProvider) {\n        setSnackbar({\n          type: \"error\",\n          message: '\"No provider was found\"'\n        });\n        return;\n      }\n\n      const provider = await web3Modal.connect();\n      web3 = new Web3(provider);\n      subscribeProvider(provider);\n      const accounts = await web3.eth.getAccounts();\n      const chain = await web3.eth.getChainId();\n      setAddress(accounts[0]);\n      setChainId(chain);\n    } catch (err) {\n      console.error(err);\n      setSnackbar({\n        type: \"error\",\n        message: \"Failed to connect\"\n      });\n    }\n\n    setLoading(false);\n  };\n\n  const disconnect = () => {\n    web3Modal.clearCachedProvider();\n    setAddress(null);\n    setChainId(null);\n  };\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setSnackbar(null);\n  };\n\n  useEffect(() => {\n    if (web3Modal.cachedProvider) {\n      connect();\n    } // eslint-disable-next-line\n\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      address,\n      loading,\n      connect,\n      disconnect,\n      chainId,\n      setSnackbar\n    },\n    children: [children, snackbar && /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!snackbar,\n      autoHideDuration: 4000,\n      onClose: handleClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleClose,\n        severity: snackbar === null || snackbar === void 0 ? void 0 : snackbar.type,\n        sx: {\n          width: \"100%\"\n        },\n        children: snackbar === null || snackbar === void 0 ? void 0 : snackbar.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthProvider, \"OQ/mMk2lhTRfZ9jNgepClXgxv2w=\");\n\n_c3 = AuthProvider;\nexport const useAuthContext = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuthContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Alert$forwardRef\");\n$RefreshReg$(_c2, \"Alert\");\n$RefreshReg$(_c3, \"AuthProvider\");","map":{"version":3,"names":["createContext","forwardRef","useContext","useEffect","useState","Web3","Web3Modal","WalletConnectProvider","Snackbar","MuiAlert","AuthContext","address","connect","loading","disconnect","chainId","setSnackbar","providerOptions","walletconnect","package","options","rpc","network","Alert","props","ref","web3Modal","cacheProvider","AuthProvider","children","setAddress","setLoading","snackbar","setChainId","subscribeProvider","provider","on","error","console","log","accounts","type","message","web3","givenProvider","currentProvider","eth","getAccounts","chain","getChainId","err","clearCachedProvider","handleClose","event","reason","cachedProvider","width","useAuthContext"],"sources":["/home/core/Documents/baked-beans-master/src/providers/AuthProvider.js"],"sourcesContent":["import {\n  createContext,\n  forwardRef,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nimport Web3 from \"web3\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\n\nexport const AuthContext = createContext({\n  address: null,\n  connect: () => null,\n  loading: false,\n  disconnect: () => null,\n  chainId: null,\n  setSnackbar: () => null,\n});\n\nconst providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider, // required\n    options: {\n      rpc: {\n        56: \"https://bsc-dataseed.binance.org/\",\n        97: \"https://data-seed-prebsc-1-s1.binance.org:8545/\",\n        250: \"https://rpc.ftm.tools/\"\n      },\n      network: \"binance\"//{\"binance\", \"fantom\"}\n    },\n  },\n};\n\nconst Alert = forwardRef((props, ref) => {\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\nconst web3Modal = new Web3Modal({\n  cacheProvider: true, // optional\n  providerOptions, // required\n});\n\nexport const AuthProvider = ({ children }) => {\n  const [address, setAddress] = useState();\n  const [loading, setLoading] = useState(false);\n  const [snackbar, setSnackbar] = useState(null);\n  const [chainId, setChainId] = useState(null);\n\n  const subscribeProvider = (provider) => {\n    provider.on(\"disconnect\", (error) => {\n      console.log(error); \n      setChainId(null);\n      setAddress(null);\n    });\n    provider.on(\"accountsChanged\", (accounts) => {\n      setAddress(accounts[0]);\n      setSnackbar({\n        type: \"info\",\n        message: \"Account Changed\",\n      });\n    });\n    // Subscribe to chainId change\n    provider.on(\"chainChanged\", (chainId) => {\n      setChainId(chainId);\n    });\n  };\n\n  const connect = async () => {\n    if (address) {\n      return;\n    }\n    setLoading(true);\n\n    try {\n      let web3 = new Web3(Web3.givenProvider);\n\n      if (!web3.currentProvider) {\n        setSnackbar({\n          type: \"error\",\n          message: '\"No provider was found\"',\n        });\n        return;\n      }\n      const provider = await web3Modal.connect();\n      web3 = new Web3(provider);\n      subscribeProvider(provider);\n\n      const accounts = await web3.eth.getAccounts();\n      const chain = await web3.eth.getChainId();\n      setAddress(accounts[0]);\n      setChainId(chain);\n    } catch (err) {\n      console.error(err);\n      setSnackbar({\n        type: \"error\",\n        message: \"Failed to connect\",\n      });\n    }\n    setLoading(false);\n  };\n\n  const disconnect = () => {\n    web3Modal.clearCachedProvider();\n    setAddress(null);\n    setChainId(null);\n  };\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setSnackbar(null);\n  };\n\n  useEffect(() => {\n    if (web3Modal.cachedProvider) {\n      connect();\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{ address, loading, connect, disconnect, chainId, setSnackbar }}\n    >\n      {children}\n      {snackbar && (\n        <Snackbar\n          open={!!snackbar}\n          autoHideDuration={4000}\n          onClose={handleClose}\n        >\n          {\n            <Alert\n              onClose={handleClose}\n              severity={snackbar?.type}\n              sx={{ width: \"100%\" }}\n            >\n              {snackbar?.message}\n            </Alert>\n          }\n        </Snackbar>\n      )}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuthContext = () => useContext(AuthContext);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}