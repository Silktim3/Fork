{"ast":null,"code":"var _jsxFileName = \"/home/core/Documents/baked-beans-master/src/Home/components/Winner.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport CardContent from \"@mui/material/CardContent\";\nimport Card from \"@mui/material/Card\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\nimport Divider from \"@mui/material/Divider\";\nimport { styled } from \"@mui/system\";\nimport { useLocation } from \"react-router-dom\";\nimport Web3 from \"web3\";\nimport PriceInput from \"../../components/PriceInput\";\nimport { useContractContext } from \"../../providers/ContractProvider\";\nimport { useAuthContext } from \"../../providers/AuthProvider\";\nimport { useEffect, useState } from \"react\";\nimport { config } from \"../../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CardWrapper = styled(Card)({\n  background: \"rgb(251 251 245)\",\n  marginBottom: 24,\n  boxShadow: \"0px 0px 20px 16px #ccffff\"\n});\nconst started = 0; //config.started;\n\nconst ButtonContainer = styled(Grid)(_ref => {\n  let {\n    theme\n  } = _ref;\n  return {\n    [theme.breakpoints.down(\"sm\")]: {\n      flexDirection: \"column\",\n      \"> div\": {\n        marginLeft: 0,\n        marginRight: 0\n      }\n    }\n  };\n});\nlet timeout = null;\n\nfunction useQuery() {\n  _s();\n\n  return new URLSearchParams(useLocation().search);\n}\n\n_s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\n\nexport default function Winner() {\n  _s2();\n\n  const {\n    contract,\n    wrongNetwork,\n    getBnbBalance,\n    fromWei,\n    toWei,\n    web3\n  } = useContractContext();\n  const {\n    address,\n    chainId\n  } = useAuthContext();\n  const [contractBNB, setContractBNB] = useState(0);\n  const [walletBalance, setWalletBalance] = useState({\n    bnb: 0,\n    beans: 0,\n    rewards: 0,\n    winner: \"\"\n  });\n  const [bakeBNB, setBakeBNB] = useState(0);\n  const [calculatedBeans, setCalculatedBeans] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const query = useQuery();\n\n  const fetchContractBNBBalance = () => {\n    if (!web3 || wrongNetwork) {\n      setContractBNB(0);\n      return;\n    }\n\n    getBnbBalance(config.contractAddress).then(amount => {\n      setContractBNB(fromWei(amount));\n    });\n  };\n\n  const fetchWalletBalance = async () => {\n    if (!web3 || wrongNetwork || !address) {\n      setWalletBalance({\n        bnb: 0,\n        beans: 0,\n        rewards: 0\n      });\n      return;\n    }\n\n    try {\n      const [bnbAmount, beansAmount, rewardsAmount, winner] = await Promise.all([getBnbBalance(address), contract.methods.getMyMiners(address).call().catch(err => {\n        console.error(\"myminers\", err);\n        return 0;\n      }), contract.methods.beanRewards(address).call().catch(err => {\n        console.error(\"beanrewards\", err);\n        return 0;\n      }), contract.methods.getWinner().call().catch(err => {\n        console.error(\"winner\", err);\n        return 0;\n      })]);\n      setWalletBalance({\n        bnb: fromWei(`${bnbAmount}`),\n        beans: beansAmount,\n        rewards: fromWei(`${rewardsAmount}`),\n        winner: winner\n      });\n    } catch (err) {\n      console.error(err);\n      setWalletBalance({\n        bnb: 0,\n        beans: 0,\n        rewards: 0\n      });\n    }\n  };\n\n  useEffect(() => {\n    fetchContractBNBBalance();\n  }, [web3, chainId]);\n  useEffect(() => {\n    fetchWalletBalance();\n  }, [address, web3, chainId]);\n\n  const getRef = () => {\n    const ref = Web3.utils.isAddress(query.get(\"ref\")) ? query.get(\"ref\") : \"0x0000000000000000000000000000000000000000\";\n    return ref;\n  };\n\n  return /*#__PURE__*/_jsxDEV(CardWrapper, {\n    children: [loading && /*#__PURE__*/_jsxDEV(LinearProgress, {\n      color: \"secondary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        mt: 3,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          fontWeight: \"bolder\",\n          children: \"\\uD83C\\uDFB2 Jackpot \\uD83C\\uDFB2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: started == 0 ? \"A LOT\" : contractBNB * 0.01 + \" FTM\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        mt: 3,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          children: \"Last Winner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [started == 0 ? \"COULD BE YOU\" : walletBalance.winner, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Winner, \"VHO07mCKKE+XiXwcLR1m9coXmGs=\", false, function () {\n  return [useContractContext, useAuthContext, useQuery];\n});\n\n_c = Winner;\n\nvar _c;\n\n$RefreshReg$(_c, \"Winner\");","map":{"version":3,"names":["CardContent","Card","Grid","Box","Typography","Button","LinearProgress","Divider","styled","useLocation","Web3","PriceInput","useContractContext","useAuthContext","useEffect","useState","config","CardWrapper","background","marginBottom","boxShadow","started","ButtonContainer","theme","breakpoints","down","flexDirection","marginLeft","marginRight","timeout","useQuery","URLSearchParams","search","Winner","contract","wrongNetwork","getBnbBalance","fromWei","toWei","web3","address","chainId","contractBNB","setContractBNB","walletBalance","setWalletBalance","bnb","beans","rewards","winner","bakeBNB","setBakeBNB","calculatedBeans","setCalculatedBeans","loading","setLoading","query","fetchContractBNBBalance","contractAddress","then","amount","fetchWalletBalance","bnbAmount","beansAmount","rewardsAmount","Promise","all","methods","getMyMiners","call","catch","err","console","error","beanRewards","getWinner","getRef","ref","utils","isAddress","get"],"sources":["/home/core/Documents/baked-beans-master/src/Home/components/Winner.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport CardContent from \"@mui/material/CardContent\";\nimport Card from \"@mui/material/Card\";\nimport Grid from \"@mui/material/Grid\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\nimport Divider from \"@mui/material/Divider\";\nimport { styled } from \"@mui/system\";\nimport { useLocation } from \"react-router-dom\";\nimport Web3 from \"web3\";\n\nimport PriceInput from \"../../components/PriceInput\";\nimport { useContractContext } from \"../../providers/ContractProvider\";\nimport { useAuthContext } from \"../../providers/AuthProvider\";\nimport { useEffect, useState } from \"react\";\nimport { config } from \"../../config\";\n\nconst CardWrapper = styled(Card)({\n  background: \"rgb(251 251 245)\",\n  marginBottom: 24,\n  boxShadow: \"0px 0px 20px 16px #ccffff\",\n});\n\nconst started = 0;//config.started;\n\nconst ButtonContainer = styled(Grid)(({ theme }) => ({\n  [theme.breakpoints.down(\"sm\")]: {\n    flexDirection: \"column\",\n    \"> div\": {\n      marginLeft: 0,\n      marginRight: 0,\n    },\n  },\n}));\n\nlet timeout = null;\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function Winner() {\n  const { contract, wrongNetwork, getBnbBalance, fromWei, toWei, web3 } =\n    useContractContext();\n  const { address, chainId } = useAuthContext();\n  const [contractBNB, setContractBNB] = useState(0);\n  const [walletBalance, setWalletBalance] = useState({\n    bnb: 0,\n    beans: 0,\n    rewards: 0,\n    winner: \"\",\n  });\n  const [bakeBNB, setBakeBNB] = useState(0);\n  const [calculatedBeans, setCalculatedBeans] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const query = useQuery();\n\n  const fetchContractBNBBalance = () => {\n    if (!web3 || wrongNetwork) {\n      setContractBNB(0);\n      return;\n    }\n    getBnbBalance(config.contractAddress).then((amount) => {\n      setContractBNB(fromWei(amount));\n    });\n  };\n\n  \n\n  const fetchWalletBalance = async () => {\n    if (!web3 || wrongNetwork || !address) {\n      setWalletBalance({\n        bnb: 0,\n        beans: 0,\n        rewards: 0,\n      });\n      return;\n    }\n\n    try {\n      const [bnbAmount, beansAmount, rewardsAmount, winner] = await Promise.all([\n        getBnbBalance(address),\n        contract.methods\n          .getMyMiners(address)\n          .call()\n          .catch((err) => {\n            console.error(\"myminers\", err);\n            return 0;\n          }),\n        contract.methods\n          .beanRewards(address)\n          .call()\n          .catch((err) => {\n            console.error(\"beanrewards\", err);\n            return 0;\n          }),\n        contract.methods\n          .getWinner()\n          .call()\n          .catch((err) => {\n            console.error(\"winner\", err);\n            return 0;\n          })  \n      ]);\n      setWalletBalance({\n        bnb: fromWei(`${bnbAmount}`),\n        beans: beansAmount,\n        rewards: fromWei(`${rewardsAmount}`),\n        winner: winner,\n      });\n    } catch (err) {\n      console.error(err);\n      setWalletBalance({\n        bnb: 0,\n        beans: 0,\n        rewards: 0,\n      });\n    }\n  };\n\n  useEffect(() => {\n    fetchContractBNBBalance();\n  }, [web3, chainId]);\n\n  useEffect(() => {\n    fetchWalletBalance();\n  }, [address, web3, chainId]);\n\n  const getRef = () => {\n    const ref = Web3.utils.isAddress(query.get(\"ref\"))\n      ? query.get(\"ref\")\n      : \"0x0000000000000000000000000000000000000000\";\n    return ref;\n  };\n\n\n\n\n  return (\n    <CardWrapper>\n      {loading && <LinearProgress color=\"secondary\" />}\n      <CardContent>\n        <Grid\n          container\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          mt={3}\n        >\n          <Typography variant=\"body1\" fontWeight=\"bolder\">\n             🎲 Jackpot 🎲\n          </Typography>\n\n          <Typography variant=\"h5\">{started == 0 ? \"A LOT\" : contractBNB*0.01 + \" FTM\"}</Typography>\n        </Grid>\n        <Grid\n          container\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          mt={3}\n        >\n          <Typography variant=\"body1\">Last Winner</Typography>\n          <Typography variant=\"h6\">{started == 0 ? \"COULD BE YOU\" : walletBalance.winner} </Typography>\n        </Grid>\n        \n      </CardContent>\n    </CardWrapper>\n  );\n}\n"],"mappings":";;;;AAAA;AACA,OAAOA,WAAP,MAAwB,2BAAxB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,kBAAT,QAAmC,kCAAnC;AACA,SAASC,cAAT,QAA+B,8BAA/B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,MAAT,QAAuB,cAAvB;;AAEA,MAAMC,WAAW,GAAGT,MAAM,CAACP,IAAD,CAAN,CAAa;EAC/BiB,UAAU,EAAE,kBADmB;EAE/BC,YAAY,EAAE,EAFiB;EAG/BC,SAAS,EAAE;AAHoB,CAAb,CAApB;AAMA,MAAMC,OAAO,GAAG,CAAhB,C,CAAkB;;AAElB,MAAMC,eAAe,GAAGd,MAAM,CAACN,IAAD,CAAN,CAAa;EAAA,IAAC;IAAEqB;EAAF,CAAD;EAAA,OAAgB;IACnD,CAACA,KAAK,CAACC,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAAgC;MAC9BC,aAAa,EAAE,QADe;MAE9B,SAAS;QACPC,UAAU,EAAE,CADL;QAEPC,WAAW,EAAE;MAFN;IAFqB;EADmB,CAAhB;AAAA,CAAb,CAAxB;AAUA,IAAIC,OAAO,GAAG,IAAd;;AAEA,SAASC,QAAT,GAAoB;EAAA;;EAClB,OAAO,IAAIC,eAAJ,CAAoBtB,WAAW,GAAGuB,MAAlC,CAAP;AACD;;GAFQF,Q;UACoBrB,W;;;AAG7B,eAAe,SAASwB,MAAT,GAAkB;EAAA;;EAC/B,MAAM;IAAEC,QAAF;IAAYC,YAAZ;IAA0BC,aAA1B;IAAyCC,OAAzC;IAAkDC,KAAlD;IAAyDC;EAAzD,IACJ3B,kBAAkB,EADpB;EAEA,MAAM;IAAE4B,OAAF;IAAWC;EAAX,IAAuB5B,cAAc,EAA3C;EACA,MAAM,CAAC6B,WAAD,EAAcC,cAAd,IAAgC5B,QAAQ,CAAC,CAAD,CAA9C;EACA,MAAM,CAAC6B,aAAD,EAAgBC,gBAAhB,IAAoC9B,QAAQ,CAAC;IACjD+B,GAAG,EAAE,CAD4C;IAEjDC,KAAK,EAAE,CAF0C;IAGjDC,OAAO,EAAE,CAHwC;IAIjDC,MAAM,EAAE;EAJyC,CAAD,CAAlD;EAMA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBpC,QAAQ,CAAC,CAAD,CAAtC;EACA,MAAM,CAACqC,eAAD,EAAkBC,kBAAlB,IAAwCtC,QAAQ,CAAC,CAAD,CAAtD;EACA,MAAM,CAACuC,OAAD,EAAUC,UAAV,IAAwBxC,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAMyC,KAAK,GAAG1B,QAAQ,EAAtB;;EAEA,MAAM2B,uBAAuB,GAAG,MAAM;IACpC,IAAI,CAAClB,IAAD,IAASJ,YAAb,EAA2B;MACzBQ,cAAc,CAAC,CAAD,CAAd;MACA;IACD;;IACDP,aAAa,CAACpB,MAAM,CAAC0C,eAAR,CAAb,CAAsCC,IAAtC,CAA4CC,MAAD,IAAY;MACrDjB,cAAc,CAACN,OAAO,CAACuB,MAAD,CAAR,CAAd;IACD,CAFD;EAGD,CARD;;EAYA,MAAMC,kBAAkB,GAAG,YAAY;IACrC,IAAI,CAACtB,IAAD,IAASJ,YAAT,IAAyB,CAACK,OAA9B,EAAuC;MACrCK,gBAAgB,CAAC;QACfC,GAAG,EAAE,CADU;QAEfC,KAAK,EAAE,CAFQ;QAGfC,OAAO,EAAE;MAHM,CAAD,CAAhB;MAKA;IACD;;IAED,IAAI;MACF,MAAM,CAACc,SAAD,EAAYC,WAAZ,EAAyBC,aAAzB,EAAwCf,MAAxC,IAAkD,MAAMgB,OAAO,CAACC,GAAR,CAAY,CACxE9B,aAAa,CAACI,OAAD,CAD2D,EAExEN,QAAQ,CAACiC,OAAT,CACGC,WADH,CACe5B,OADf,EAEG6B,IAFH,GAGGC,KAHH,CAGUC,GAAD,IAAS;QACdC,OAAO,CAACC,KAAR,CAAc,UAAd,EAA0BF,GAA1B;QACA,OAAO,CAAP;MACD,CANH,CAFwE,EASxErC,QAAQ,CAACiC,OAAT,CACGO,WADH,CACelC,OADf,EAEG6B,IAFH,GAGGC,KAHH,CAGUC,GAAD,IAAS;QACdC,OAAO,CAACC,KAAR,CAAc,aAAd,EAA6BF,GAA7B;QACA,OAAO,CAAP;MACD,CANH,CATwE,EAgBxErC,QAAQ,CAACiC,OAAT,CACGQ,SADH,GAEGN,IAFH,GAGGC,KAHH,CAGUC,GAAD,IAAS;QACdC,OAAO,CAACC,KAAR,CAAc,QAAd,EAAwBF,GAAxB;QACA,OAAO,CAAP;MACD,CANH,CAhBwE,CAAZ,CAA9D;MAwBA1B,gBAAgB,CAAC;QACfC,GAAG,EAAET,OAAO,CAAE,GAAEyB,SAAU,EAAd,CADG;QAEff,KAAK,EAAEgB,WAFQ;QAGff,OAAO,EAAEX,OAAO,CAAE,GAAE2B,aAAc,EAAlB,CAHD;QAIff,MAAM,EAAEA;MAJO,CAAD,CAAhB;IAMD,CA/BD,CA+BE,OAAOsB,GAAP,EAAY;MACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;MACA1B,gBAAgB,CAAC;QACfC,GAAG,EAAE,CADU;QAEfC,KAAK,EAAE,CAFQ;QAGfC,OAAO,EAAE;MAHM,CAAD,CAAhB;IAKD;EACF,CAjDD;;EAmDAlC,SAAS,CAAC,MAAM;IACd2C,uBAAuB;EACxB,CAFQ,EAEN,CAAClB,IAAD,EAAOE,OAAP,CAFM,CAAT;EAIA3B,SAAS,CAAC,MAAM;IACd+C,kBAAkB;EACnB,CAFQ,EAEN,CAACrB,OAAD,EAAUD,IAAV,EAAgBE,OAAhB,CAFM,CAAT;;EAIA,MAAMmC,MAAM,GAAG,MAAM;IACnB,MAAMC,GAAG,GAAGnE,IAAI,CAACoE,KAAL,CAAWC,SAAX,CAAqBvB,KAAK,CAACwB,GAAN,CAAU,KAAV,CAArB,IACRxB,KAAK,CAACwB,GAAN,CAAU,KAAV,CADQ,GAER,4CAFJ;IAGA,OAAOH,GAAP;EACD,CALD;;EAUA,oBACE,QAAC,WAAD;IAAA,WACGvB,OAAO,iBAAI,QAAC,cAAD;MAAgB,KAAK,EAAC;IAAtB;MAAA;MAAA;MAAA;IAAA,QADd,eAEE,QAAC,WAAD;MAAA,wBACE,QAAC,IAAD;QACE,SAAS,MADX;QAEE,cAAc,EAAC,eAFjB;QAGE,UAAU,EAAC,QAHb;QAIE,EAAE,EAAE,CAJN;QAAA,wBAME,QAAC,UAAD;UAAY,OAAO,EAAC,OAApB;UAA4B,UAAU,EAAC,QAAvC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QANF,eAUE,QAAC,UAAD;UAAY,OAAO,EAAC,IAApB;UAAA,UAA0BjC,OAAO,IAAI,CAAX,GAAe,OAAf,GAAyBqB,WAAW,GAAC,IAAZ,GAAmB;QAAtE;UAAA;UAAA;UAAA;QAAA,QAVF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAaE,QAAC,IAAD;QACE,SAAS,MADX;QAEE,cAAc,EAAC,eAFjB;QAGE,UAAU,EAAC,QAHb;QAIE,EAAE,EAAE,CAJN;QAAA,wBAME,QAAC,UAAD;UAAY,OAAO,EAAC,OAApB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QANF,eAOE,QAAC,UAAD;UAAY,OAAO,EAAC,IAApB;UAAA,WAA0BrB,OAAO,IAAI,CAAX,GAAe,cAAf,GAAgCuB,aAAa,CAACK,MAAxE;QAAA;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA;QAAA;QAAA;QAAA;MAAA,QAbF;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD;;IA9HuBhB,M;UAEpBrB,kB,EAC2BC,c,EAWfiB,Q;;;KAdQG,M"},"metadata":{},"sourceType":"module"}